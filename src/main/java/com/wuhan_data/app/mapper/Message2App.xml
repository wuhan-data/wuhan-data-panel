<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
    <mapper namespace="com.wuhan_data.app.mapper.Message2MapperApp">
        <insert id="add" parameterType="Message2" >
            insert into WUHAN_DATA.MESSAGE2 (sender_id,receiver_id,title,label,content,m_text,type,path,create_time) values (#{sender_id},#{receiver_id},#{title},#{label},#{content},#{m_text},#{type},#{path},#{create_time})   
        </insert>
           
        <delete id="delete" parameterType="Message2" >
            delete from WUHAN_DATA.MESSAGE2 where id= #{id}  
        </delete> 
        <select id="get" parameterType="_int" resultType="Message2">
            select * from   WUHAN_DATA.MESSAGE2  where id= #{id}   
        </select>
 
        <update id="update" parameterType="Message2" >
            update WUHAN_DATA.MESSAGE2 set sender_id=#{sender_id},receiver_id=#{receiver_id},title=#{title},label=#{label},content=#{content},m_text=#{m_text},type=#{type},path=#{path},create_time=#{create_time} where id=#{id}   
        </update>
        
        <select id="list" resultType="Message2">
            select * from WUHAN_DATA.MESSAGE2     
        </select> 
        
        <select id="count" resultType="int">
        	select count(*) from WUHAN_DATA.MESSAGE2  
        </select>

        <!-- 列表，可分页 -->
        <select id="listByPage" resultType="Message2" parameterType="java.util.Map">
            select * from WUHAN_DATA.MESSAGE2   order by id limit #{page.dbIndex},#{page.dbNumber}
        </select> 
        
        <!--模糊查询 -->
		<select id="searchByContent" parameterType="java.util.Map" resultType="Message2">
            select * from WUHAN_DATA.MESSAGE2 
            <where>
            title like concat(concat('%',#{title}),'%')  
            </where>
             order by id limit #{page.dbIndex},#{page.dbNumber}
        </select>
        
        <!-- 模糊查询数量 -->
        <select id="searchCountByContent" resultType="int" parameterType="java.util.Map" >
            select count(*) from WUHAN_DATA.MESSAGE2 where  title like concat(concat('%',#{title}),'%')  
        </select>
        
        <select id="getByRid" resultType="Message2">
            select * from WUHAN_DATA.MESSAGE2 where receiver_id like concat('%|',#{receiver_id},'|%')
        </select>
         <select id="getByLabel" resultType="Message2">
            select * from WUHAN_DATA.MESSAGE2 where label=#{label}
        </select>
    </mapper>